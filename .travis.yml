language: c
sudo: false
addons:
  apt:
    packages:
      - flex
      - bison
script:
  - scripts/download-d8.sh
  - rm src/wasm-parser.c src/wasm-lexer.c
  - make everything
  - test/run-tests.py
  - test/run-tests.py -e out/sexpr-wasm-asan --timeout=10
  - test/run-tests.py -e out/sexpr-wasm-msan --timeout=10
  - test/run-tests.py -e out/sexpr-wasm-lsan --timeout=10
compiler:
  - clang
  - gcc
